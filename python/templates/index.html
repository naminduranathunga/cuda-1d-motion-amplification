<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CUDA Motion Amplifier</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="dark-theme">
    <div class="container">
        <header>
            <h1>CUDA Motion Amplifier</h1>
            <p>Amplify micro-motions in horizontal direction using high-performance CUDA kernels.</p>
        </header>

        <main>
            <section class="upload-section">
                <div class="card glass">
                    <form id="upload-form">
                        <div class="form-group">
                            <label for="video-upload" class="upload-label">
                                <span class="icon">üìÅ</span>
                                <span class="text">Choose Video or Drop Here</span>
                                <input type="file" id="video-upload" name="video" accept="video/*" required>
                            </label>
                            <div id="file-name" class="file-name"></div>
                        </div>
                        <div class="form-group grid-param">
                            <div class="input-item">
                                <label for="low-freq">Low Cutoff (Hz)</label>
                                <input type="number" id="low-freq" name="low_freq" step="0.1" value="0.5">
                            </div>
                            <div class="input-item">
                                <label for="high-freq">High Cutoff (Hz)</label>
                                <input type="number" id="high-freq" name="high_freq" step="0.1" value="2.0">
                            </div>
                            <div class="input-item">
                                <label for="sigma-val">Gaussian Sigma</label>
                                <input type="number" id="sigma-val" name="sigma" step="0.1" value="1.0">
                            </div>
                            <div class="input-item">
                                <label for="user-fps">Override FPS</label>
                                <input type="number" id="user-fps" name="fps" step="0.01" placeholder="Auto">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="alpha-range">Amplification Factor (Œ±): <span id="alpha-val">50</span></label>
                            <input type="range" id="alpha-range" name="alpha" min="1" max="200" value="50">
                        </div>
                        <button type="submit" id="process-btn" class="btn-primary">Process Video</button>
                    </form>
                </div>
            </section>

            <section id="processing-status" class="status-section hidden">
                <div class="loader"></div>
                <p>Processing on GPU...</p>
            </section>

            <section id="results-section" class="results-section hidden">
                <div class="metrics-grid">
                    <div class="metric-card glass">
                        <span class="label">Host ‚Üí Device</span>
                        <span id="metric-h2d" class="value">0.00 ms</span>
                    </div>
                    <div class="metric-card glass">
                        <span class="label">Gaussian Blur</span>
                        <span id="metric-blur" class="value">0.00 ms</span>
                    </div>
                    <div class="metric-card glass">
                        <span class="label">Sobel X</span>
                        <span id="metric-sobel" class="value">0.00 ms</span>
                    </div>
                    <div class="metric-card glass">
                        <span class="label">Temporal Filter</span>
                        <span id="metric-temp" class="value">0.00 ms</span>
                    </div>
                    <div class="metric-card glass">
                        <span class="label">Amplification</span>
                        <span id="metric-amp" class="value">0.00 ms</span>
                    </div>
                    <div class="metric-card glass highlight">
                        <span class="label">Total GPU Time</span>
                        <span id="metric-total" class="value">0.00 ms</span>
                    </div>
                </div>

                <div class="player-container">
                    <div class="video-wrapper glass">
                        <h3>Original (Select ROI)</h3>
                        <div class="video-box">
                            <video id="input-player" controls preload="auto" loop autoplay></video>
                            <canvas id="roi-canvas"></canvas>
                        </div>
                    </div>
                    <div class="video-wrapper glass">
                        <h3>Amplified</h3>
                        <div class="video-box">
                            <video id="output-player" controls preload="auto" loop autoplay></video>
                        </div>
                    </div>
                </div>

                <div class="analysis-grid">
                    <div class="analysis-card glass">
                        <h3>ROI Intensity Histogram</h3>
                        <div class="chart-wrapper">
                            <canvas id="histogram-chart"></canvas>
                        </div>
                    </div>
                    <div class="analysis-card glass">
                        <h3>Frequency Spectrum (Hz)</h3>
                        <div class="chart-wrapper">
                            <canvas id="frequency-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="controls-sync">
                    <button id="sync-btn" class="btn-secondary">Sync Playback</button>
                </div>
            </section>
        </main>
    </div>
    <script src="/static/script.js"></script>
</body>

</html>